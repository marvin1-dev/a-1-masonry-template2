<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="A-1 Masonry offers expert construction and maintenance solutions." />
  <meta name="keywords" content="Construction, Masonry, Maintenance, Safety, Consultation" />
  <meta name="author" content="A-1 Masonry" />
  <title>A-1 Masonry | Expert Construction & Maintenance Services</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<header>
  <h1>A-1 Masonry</h1>
  <nav>
    <a href="#services">Services</a>
    <a href="#about">About</a>
    <a href="#contact">Contact</a>
    <a href="#book" class="btn">Book now</a>
  </nav>
</header>

<section class="hero">
  <div class="hero-content">
    <h2>Expert Construction and Maintenance Solutions</h2>
  </div>
</section>

<section class="section" id="products">
  <div class="container">
    <h3>Featured Products</h3>
    <div class="card-container">
      <div class="card circle">
        <img src="https://picsum.photos/300/300?random=1" alt="Precision Build Services">
        <h4>Precision Build Services</h4>
        <p>$25</p>
      </div>
      <div class="card circle">
        <img src="https://picsum.photos/300/300?random=2" alt="24/7 Support Hub">
        <h4>24/7 Support Hub</h4>
        <p>$25</p>
      </div>
      <div class="card circle">
        <img src="https://picsum.photos/300/300?random=3" alt="SafeGuard Pro">
        <h4>SafeGuard Pro</h4>
        <p>$25</p>
      </div>
    </div>
    <div class="btn-wrapper">
      <a href="#services" class="btn">Shop All</a>
    </div>
  </div>
</section>

<section class="section" id="services">
  <div class="container">
    <h3>Our Services</h3>
    <div class="card-container">
      <div class="card">
        <img src="https://picsum.photos/600/400?random=4" alt="Precision Build Solutions">
        <h4>Precision Build Solutions</h4>
        <p>$99</p>
        <p>Delivering top-tier construction management and maintenance services.</p>
      </div>
      <div class="card">
        <img src="https://picsum.photos/600/400?random=5" alt="Expert Consultation">
        <h4>Expert Consultation</h4>
        <p>$149</p>
        <p>Personalized guidance and innovative solutions.</p>
      </div>
      <div class="card">
        <img src="https://picsum.photos/600/400?random=6" alt="Secure Build Compliance">
        <h4>Secure Build Compliance</h4>
        <p>$199</p>
        <p>Ensuring every project meets stringent safety standards.</p>
      </div>
    </div>
    <a href="#book" class="btn">Schedule Your Appointment</a>
  </div>
</section>

<section class="section" id="book">
  <div class="container two-column">
    <div class="column-left">
      <h3>Schedule your appointment</h3>
      <p>
        Scheduling an appointment with our construction and maintenance team ensures that you receive expert guidance tailored to your projectâ€™s unique requirements. Our dedicated professionals are ready to provide efficient and reliable services to meet all your needs.
      </p>
      <img src="https://picsum.photos/600/600?random=7" alt="Schedule Appointment">
    </div>

    <div class="column-right">

      <!-- STEP 1 -->
      <div class="booking-step step-1">
        <h4><i class="fa fa-calendar"></i> Select Appointment</h4>

        <div class="service-card">
          <div class="service-info">
            <strong>Free Consultation</strong><br>
            <small>30 minutes</small>
          </div>
          <button class="book-btn" data-service="Free Consultation">Book</button>
        </div>

        <div class="service-card">
          <div class="service-info">
            <strong>Basic Service</strong><br>
            <small>1 hour @ $99.00</small>
          </div>
          <button class="book-btn" data-service="Basic Service">Book</button>
        </div>

        <div class="service-card">
          <div class="service-info">
            <strong>Advanced Service</strong><br>
            <small>1 hour @ $199.00</small>
          </div>
          <button class="book-btn" data-service="Advanced Service">Book</button>
        </div>

      </div>

      <!-- STEP 2 -->
      <div class="booking-step step-2" style="display:none;">
        <h4>Date & Time</h4>
        <form id="bookingForm">
          <input type="hidden" name="service" id="selectedService">

          <label for="name">Full Name</label>
          <input type="text" id="name" name="name" required>

          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" required>

          <label for="date">Select Date</label>
          <div id="date-buttons" class="date-buttons">Loading dates...</div>

          <label for="time">Select Time</label>
          <div id="time-buttons" class="time-buttons">Please select a date</div>

          <button type="submit">Confirm Booking</button>
        </form>

        <div id="bookingResult" class="booking-result"></div>
        <button class="back-btn">Back</button>
      </div>

    </div>
  </div>
</section>


<section class="section two-column" id="about">
  <div class="container">
    <div class="column-img">
      <img src="https://picsum.photos/600/600?random=8" alt="About our company">
    </div>
    <div class="column-text">
      <h3>About our company</h3>
      <p>We pride ourselves on delivering top-tier solutions with unmatched precision and reliability.</p>
      <a href="#contact" class="btn">Learn More</a>
    </div>
  </div>
</section>

<section class="section two-column" id="contact">
  <div class="container">
    <div class="column-text">
      <h3>Contact Us</h3>
      <p>Interested in working together? Fill out some info and we will be in touch shortly.</p>
      <form id="contactForm">
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" name="firstName" required />

        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" name="lastName" />

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />

        <label for="message">Message</label>
        <textarea id="message" name="message" rows="5" required></textarea>

        <button type="submit">Send</button>
      </form>
    </div>
  </div>
</section>

<footer>
  <div class="container footer-grid">
    <div>
      <p>Your Site Title</p>
      <p>Made with <a href="https://www.squarespace.com">Squarespace</a></p>
    </div>
    <div>
      <p>Location<br>123 Demo Street<br>New York, NY 12345</p>
    </div>
    <div>
      <p>Contact<br>email@example.com<br>(555) 555-5555</p>
    </div>
  </div>
</footer>

<script>
const AVAILABLE_API = 'https://6p764d9nkl.execute-api.us-east-1.amazonaws.com/default/A1Available-dates';
const BOOKING_API = 'https://de4igqskmj.execute-api.us-east-1.amazonaws.com/default/A1Book';

document.querySelectorAll('.book-btn').forEach(button => {
  button.addEventListener('click', async function() {
    const service = this.getAttribute('data-service');
    document.getElementById('selectedService').value = service;
    document.querySelector('.step-1').style.display = 'none';
    document.querySelector('.step-2').style.display = 'flex';

    // Load available dates
    const dateContainer = document.getElementById('date-buttons');
    const timeContainer = document.getElementById('time-buttons');
    dateContainer.innerHTML = 'Loading dates...';
    timeContainer.innerHTML = 'Please select a date';

    try {
      const response = await fetch(`${AVAILABLE_API}?service=${encodeURIComponent(service)}`);
      const data = await response.json();

      if (data.available_dates && data.available_dates.length > 0) {
        dateContainer.innerHTML = '';
        data.available_dates.forEach(item => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.textContent = item.date;
          btn.addEventListener('click', () => {
            document.querySelectorAll('#date-buttons button').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            document.getElementById('date').value = item.date;
            loadTimeButtons(item.slots);
          });
          dateContainer.appendChild(btn);
        });
      } else {
        dateContainer.innerHTML = '<p>No available dates</p>';
        timeContainer.innerHTML = '<p>No available times</p>';
      }
    } catch (err) {
      console.error('Failed to load dates:', err);
      dateContainer.innerHTML = '<p>Error loading dates</p>';
      timeContainer.innerHTML = '<p>Error loading times</p>';
    }
  });
});

function loadTimeButtons(slots) {
  const timeContainer = document.getElementById('time-buttons');
  timeContainer.innerHTML = '';
  slots.forEach(slot => {
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.textContent = slot;
    btn.addEventListener('click', () => {
      document.querySelectorAll('#time-buttons button').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      document.getElementById('time').value = slot;
    });
    timeContainer.appendChild(btn);
  });
}

document.querySelector('.back-btn').addEventListener('click', function() {
  document.querySelector('.step-2').style.display = 'none';
  document.querySelector('.step-1').style.display = 'flex';
});

// Hidden fields to hold selected date/time
const hiddenDate = document.createElement('input');
hiddenDate.type = 'hidden';
hiddenDate.name = 'date';
hiddenDate.id = 'date';
document.getElementById('bookingForm').appendChild(hiddenDate);

const hiddenTime = document.createElement('input');
hiddenTime.type = 'hidden';
hiddenTime.name = 'time';
hiddenTime.id = 'time';
document.getElementById('bookingForm').appendChild(hiddenTime);

document.getElementById('bookingForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const formData = new FormData(e.target);
  const data = Object.fromEntries(formData);

  try {
    const response = await fetch(BOOKING_API, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    const result = await response.json();
    document.getElementById('bookingResult').innerText = result.message || 'Booking submitted!';
  } catch (error) {
    console.error('Error:', error);
    document.getElementById('bookingResult').innerText = 'Error submitting booking. Please try again later.';
  }
});

</script>

</body>
</html>
